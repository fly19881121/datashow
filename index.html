<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>千方小贷业务数据监测</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="stylesheets/index.css" rel="stylesheet">

  <script src="jquery3.3.1.js"></script>

  <script src="digitalScroll.js"></script>


<script src="echarts.min.js"></script>


<body>
  <div class="header clearix">
    <span class="">千方物流金融实时动态</span>
  </div>
  <div class="main">
    <div class="item-wrap-a">
      <div class="iwa-a">
        <h5>在线用户数</h5>
        <div class="totalnum totalnum-a">

        </div>
      </div>
      <div class="iwa-b">
        <h5>累计实名认证用户数</h5>
        <div class="totalnum totalnum-b">

        </div>
      </div>
      <div class="iwa-c">
        <h5>当日新增用户数</h5>
        <div class="totalnum totalnum-c">
        </div>
      </div>
      <div class="iwa-d">
        <h5>当日实名认证用户数</h5>
        <div class="totalnum totalnum-d">
        </div>
      </div>
    </div>
    <div class="item-wrap-b">
      <div class="item-wrap-bleft">
        <div class="iwb-a">
          <div id="iwb-a"></div>
        </div>
        <div class="iwb-b">
          <div class="title">垫款加油</div>
          <div id="iwb-b">
          </div>
          <div class="footer">
            当月累计放款金额: <span>19.98 亿元</span>
          </div>
        </div>
        <div class="iwb-c">
          <div class="title">运费垫资</div>
          <div id="iwb-c">
          </div>
          <div class="footer">
            当月累计放款金额: <span>414.48 万元</span>
          </div>
        </div>
     <!--    <div class="iwb-a" id="iwb-a"></div>
        <div class="iwb-b" id="iwb-b"></div> -->

      </div>
      <div class="item-wrap-bmiddle"></div>
      <div class="item-wrap-bright">
        <div class="iwb-d"></div>
        <div class="iwb-e"></div>
        <div class="iwb-f">
           <div class="title">运费垫资</div>
          <div id="iwb-f">
          </div>
          <div class="footer">
            当月累计放款金额: <span>414.48 万元</span>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="jsfunction.min.js"></script>
  <script src="drawChart.js"></script>

  <script type="text/javascript">

     var myChartB = echarts.init(document.getElementById('iwb-b'));
     var myChartC = echarts.init(document.getElementById('iwb-c'));
     var myChartF = echarts.init(document.getElementById('iwb-f'));


      //联名卡
    var lmkAlistTollAmount = [198.47,224.44,282.03,340.25,391.60,430.57,473.54];  //累计放款量(亿元)
    var lmkBlistTollCount = [169.09,190.70,231.87,276.33,325.77,373.56,425.18];    //累计消费金额(亿元)
    var lmkDCounCount = [124.97,131.38,149.06,165.94,182.68,196.59,209.82];  //累计发卡量(万张)

    var lmkCtime = ['1月','2月','3月','4月','5月','6月','7月'];


  //好运条

  var hytAcurrentgrandtotal = [87.75,93.19,102.89,112.32,121.92,131.09,140.78];  ////累计放款金额 (百万)
  // var hytBgrandtotalaccum = [3.06,3.24,3.56,3.87,4.18,4.47,4.78,4.91];    //累计放款笔数
  var hytBgrandtotalaccum = [1779,3166,3087,3113,2957,3092,1299];    //当月放款笔数
  var hytCtime = ['1月','2月','3月','4月','5月','6月','7月'];  //时间


  //卡车分期
  var carAcurrentgrandtotal = [1542,224,652,1554,]



  //联名卡配置
  optionB = {
    backgroundColor:'#fff',
    color : ['#ff7f50','#87cefa', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],
     tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            crossStyle: {
                color: '#999'
            }
        }
    },
    toolbox: {
      show:false,
      feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
      }
    },
    legend: {
        data:['放款金额','消费金额','发卡量'],
        bottom: '10'
    },
    xAxis: [
        {
            type: 'category',
            data: lmkCtime,
            axisPointer: {
                type: 'shadow'
            }
        }
    ],
    yAxis: [
        {
            type: 'value',
            name: '金额(亿元)',
            min: 0,
            max: 800,
            offset:0,
            axisLabel: {
                formatter: '{value}'
            }
        },
        {
            type: 'value',
            name: '发卡量(万张)',
            min: 100,
            max: 400,
            offset:0,
            axisLabel: {
                formatter: '{value}'
            }
        }
    ],
    series: [
        {
            name:'放款金额',
            type:'bar',
            // data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6]
            data:lmkAlistTollAmount
        },
        {
            name:'消费金额',
            type:'bar',
            // data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6]
            data:lmkBlistTollCount
        },
        {
            name:'发卡量',
            type:'line',
            yAxisIndex: 1,
            // data:[2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3]
            data:lmkDCounCount
        }
    ]
  };

  //好运条配置
  optionC = {
    backgroundColor:'#fff',
    color : ['#ff7f50','#87cefa', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],
     tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            crossStyle: {
                color: '#999'
            }
        }
    },
    toolbox: {
      show:false,
      feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
      }
    },
    legend: {
        data:['放款金额','放款笔数'],
        bottom: '10'
    },
    xAxis: [
        {
            type: 'category',
            data: hytCtime,
            axisPointer: {
                type: 'shadow'
            }
        }
    ],
    yAxis: [
        {
          type: 'value',
          name: '金额(百万元)',
          min: 0,
          max: 250,
          offset:0,
          axisLabel: {
              formatter: '{value}'
          }
        },
        {
          type: 'value',
          name: '笔数(笔)',
          min: 0,
          max: 5000,
          offset:0,
          axisLabel: {
              formatter: '{value}'
          }
        }
    ],
    series: [
        {
            name:'放款金额',
            type:'bar',
            // data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6]
            data:hytAcurrentgrandtotal
        },
        {
            name:'放款笔数',
            type:'bar',
            yAxisIndex: 1,
            // data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6]
            data:hytBgrandtotalaccum
        },
    ]
  };


  //卡车分期配置
  optionC = {
    backgroundColor:'#fff',
    color : ['#ff7f50','#87cefa', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],
     tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            crossStyle: {
                color: '#999'
            }
        }
    },
    toolbox: {
      show:false,
      feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
      }
    },
    legend: {
        data:['放款金额','放款笔数'],
        bottom: '10'
    },
    xAxis: [
        {
            type: 'category',
            data: hytCtime,
            axisPointer: {
                type: 'shadow'
            }
        }
    ],
    yAxis: [
        {
          type: 'value',
          name: '金额(百万元)',
          min: 0,
          max: 250,
          offset:0,
          axisLabel: {
              formatter: '{value}'
          }
        },
        {
          type: 'value',
          name: '笔数(笔)',
          min: 0,
          max: 5000,
          offset:0,
          axisLabel: {
              formatter: '{value}'
          }
        }
    ],
    series: [
        {
            name:'放款金额',
            type:'bar',
            // data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6]
            data:hytAcurrentgrandtotal
        },
        {
            name:'放款笔数',
            type:'bar',
            yAxisIndex: 1,
            // data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6]
            data:hytBgrandtotalaccum
        },
    ]
  };


 window.onload = function(){
   // myChartB.setOption(optionB);
    myChartB.setOption(optionB);
    myChartC.setOption(optionC);
 };
</script>


  <script type="text/javascript">
    $(function () {
      userDaka();
      setInterval(userDaka, 60000);
    });

    function show_num1(n, ele) {
      sum = parseInt(Math.random() * 1000000 + 1);
      sum2 = parseInt(Math.random() * 1000 + 1);
      sum3 = parseInt(Math.random() * 1000 + 1);
      sum4 = parseInt(Math.random() * 1000 + 1);
      var $ele = $(ele);
      var it = $ele.find('i');
      var len = String(n).length;
      for (var i = 0; i < len; i++) {
        if (it.length <= i) {
          $ele.append("<i></i>");
        }
        var num = String(n).charAt(i);
        //根据数字图片的高度设置相应的值
        var y = -parseInt(num) * 58;
        var obj = $ele.find('i').eq(i);
        obj.animate({
          backgroundPosition: '(0 ' + String(y) + 'px)'
        }, 'slow', 'swing', function () {});
      }
    }




    function userDaka() {
      $.ajax({
        // cache:true,//保留缓存数据
        type: "get", //为post请求
        url: "http://103.10.87.52:1080/daka-api/rest/api/queryData", //这是我在后台接受数据的文件名
        success: function (result) {
          var cc = JSON.parse(result).body;
          let ccJson = eval('(' + cc + ')');
          show_num1(ccJson.onlineuser, '.totalnum-a');
          show_num1(ccJson.authen, '.totalnum-b');
          show_num1(ccJson.registernum, '.totalnum-c');
          show_num1(ccJson.authenAll, '.totalnum-d');
          ccJson.typeRatio_1 = 200;
          ccJson.typeRatio_2 = 400;
          ccJson.typeRatio_3 = 100;
          ccJson.typeRatio_4 = 600;
          ccJson.typeRatio_5 = 700;
          ccJson.typeRatio_6 = 4000;
          ccJson.typeRatio_7 = 800;
          ccJson.typeRatio_8 = 40;
          ccJson.typeRatio_9 = 90;
          var pieData = [{
              name: '车主',
              value: ccJson.typeRatio_1
            },
            {
              name: '车队组织者',
              value: ccJson.typeRatio_2
            },
            {
              name: '驾驶员',
              value: ccJson.typeRatio_3
            },
            {
              name: '三方物流',
              value: ccJson.typeRatio_4
            },
            {
              name: '专线',
              value: ccJson.typeRatio_5
            },
            {
              name: '货主',
              value: ccJson.typeRatio_6
            },
            {
              name: '其它',
              value: ccJson.typeRatio_7+ccJson.typeRatio_8+ccJson.typeRatio_9
            },
          ];
          var pieOption = {
            tooltip: {
              trigger: 'item',
              formatter: function(p){
                console.log(p);
                return p.name+'<br/>'+p.value+'('+p.percent+'%)';
              }
            },
            legend: {
              orient: 'vertical',
              x: 'left',
              data: pieData.joinKey('name'),
              textStyle:{
                color:'#fff',
                fontSize:'14'
              }
            },
            series: [{
              type: 'pie',
              center:['70%','50%'],
              radius: ['50%', '75%'],
              avoidLabelOverlap: false,
              hoverAnimation:false,
              label: {
                normal: {
                  show: false,
                  position: 'center'
                },
                emphasis: {
                  show: false,
                  textStyle: {
                    fontSize: '20',
                    fontWeight: 'bold'
                  }
                }
              },
              labelLine: {
                normal: {
                  show: false
                }
              },
              data: pieData
            }]
          }
          drawChart('iwb-a',pieOption);
        },
        error: function (e) {
          console.log(e);
        }
      });
    }
  </script>





</body>

</html>